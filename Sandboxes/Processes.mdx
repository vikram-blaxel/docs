---

title: 'Process execution'

description: 'Execute and manage processes in sandboxes.'

---

Execute and manage processes in your sandboxes with Blaxel SDK. Run shell commands, retrieve process information, and control process execution.

<Tip>Complete code examples demonstrating all operations are available on Blaxel's GitHub: [in TypeScript](https://github.com/blaxel-ai/sdk-typescript/tree/main/tests/sandbox) and [in Python](https://github.com/blaxel-ai/sdk-python/tree/main/tests/integration/sandbox).</Tip>

## Execute processes and commands

<Accordion title="Set up authentication to Blaxel">

The Blaxel SDK authenticates with your workspace using credentials from these sources, in priority order:

1. when running on Blaxel, authentication is handled automatically
2. variables in your `.env` file (`BL_WORKSPACE` and `BL_API_KEY`, or see [this page](../Agents/Variables-and-secrets) for other authentication options).
3. environment variables from your machine
4. configuration file created locally when you log in through [Blaxel CLI](../cli-reference/introduction) (or deploy on Blaxel)

When developing locally, the recommended method is to just **log in to your workspace with Blaxel CLI.** This allows you to run Blaxel SDK functions that will automatically connect to your workspace without additional setup. When you deploy on Blaxel, this connection persists automatically.

When running Blaxel SDK from a remote server that is not Blaxel-hosted, we recommend using environment variables as described in the third option above.

</Accordion>

### Execute command

Execute shell commands:

<CodeGroup>

```typescript TypeScript
import { SandboxInstance } from "@blaxel/core";

const sandbox = await SandboxInstance.get("my-sandbox");

// Execute command
const process = await sandbox.process.exec({
  command: "echo 'Hello, World!'"
});
```

```python Python
from blaxel.core import SandboxInstance

sandbox = await SandboxInstance.get("my-sandbox")

# Execute command
process = await sandbox.process.exec({
  "command": "echo 'Hello, World!'"
})
```

</CodeGroup>

Logs for a [process](Processes) are available in the *process execution* object **if** the process is started with the `waitForCompletion: true` / `"wait_for_completion": True` parameter.

### Set the working directory

Set the working directory for subsequent commands:

<CodeGroup>

```typescript TypeScript
import { SandboxInstance } from "@blaxel/core";

const sandbox = await SandboxInstance.get("my-sandbox");

// Execute command
const process = await sandbox.process.exec({
  workingDir: "/app",
  command: "ls -al"
});
```

```python Python
from blaxel.core import SandboxInstance

sandbox = await SandboxInstance.get("my-sandbox")

# Execute command
process = await sandbox.process.exec({
  "working_dir": "/app",
  "command": "ls -al"
})
```

</CodeGroup>

### Use process names

When starting a process (running a command), you can specify a **process name**. This lets you interact with the process—such as retrieving logs or process information—without needing to store the process ID on your end.

<CodeGroup>

```typescript TypeScript {2}
const process = await sandbox.process.exec({
  name: "hello-process",
  command: "echo 'Hello, World!'"
});
const processInfo = await sandbox.process.get("hello-process");
```

```python Python {2}
process = await sandbox.process.exec({
  "name": "hello-process",
  "command": "echo 'Hello, World!'"
})
process_info = await sandbox.process.get("hello-process")
```

</CodeGroup>

You can use either the process name or the process ID to get information about the process:

<CodeGroup>

```typescript TypeScript
const completedProcess = await sandbox.process.get("hello-process");
if (completedProcess.status === "completed") {
  // ...
}
```

```python Python
completed_process = await sandbox.process.get("hello-process")
if completed_process.status == "completed":
    # ...
```

</CodeGroup>

The exit code of the process is available in the `exitCode` parameter of the process execution object returned by the `process.exec` and `process.get` methods.

You can also use the process ID or name to [retrieve logs of your processes](Log-streaming).

### Kill process

Kill a process immediately by running:

<CodeGroup>

```typescript TypeScript
await sandbox.process.kill("test")
```

```python Python
await sandbox.process.kill("test")
```

</CodeGroup>

## Long-running processes

### Wait for process completion

You can wait for process completion when executing it:

<CodeGroup>

```typescript TypeScript
const process = await sandbox.process.exec({
  name: "build-process",
  command: "npm run build",
  waitForCompletion: true,
  timeout: 60000 // 60 seconds
});
```

```python Python
process = await sandbox.process.exec({
  "name": "build-process",
  "command": "npm run build",
  "wait_for_completion": True,
  "timeout": 60000  # 60 seconds
})
```

</CodeGroup>

When waiting for completion, the process execution object will contain a `.logs` object which [surfaces both *stdout* and *stderr*](Log-streaming). Also, notice the `timeout` parameter which allows to set a timeout duration on the process.

<Warning>When using `waitForCompletion`, Blaxel enforces a **timeout limit of 60 seconds**. Don't set your timeout longer than this. For longer waiting periods, use the process-watching option described below.</Warning>

You can also wait for a process after it has started:

<CodeGroup>

```typescript TypeScript
await sandbox.process.exec({
  name: "long-task",
  command: "sleep 10"
});

// Wait for completion (max 10 minutes, check every 5 seconds)
await sandbox.process.wait("long-task", {
  maxWait: 600000,
  interval: 5000
});
```

```python Python
await sandbox.process.exec({
  "name": "long-task",
  "command": "sleep 10"
})

# Wait for completion (max 10 minutes, check every 5 seconds)
await sandbox.process.wait("long-task", max_wait=600000, interval=5000)
```

</CodeGroup>

Set a long completion duration if your process is expected to take longer.

### Wait for ports

In some cases, you may want to wait for a port to be opened while running — for example if you are running `npm run dev` and want to wait for port 3000 to be open.

<CodeGroup>

```typescript TypeScript
const process = await sandbox.process.exec({
  name: "dev-server",
  command: "npm run dev -- --port 3000 &",
  waitForPorts: [3000]
});
```

```python Python
process = await sandbox.process.exec({
  "name": "dev-server",
  "command": "npm run dev -- --port 3000 &",
  "wait_for_ports": [3000]
})
```

</CodeGroup>

## Auto-restart

### Restart process on failure

You can restart a process if it fails, up to a maximum number of restart attempts:

<CodeGroup>

```typescript TypeScript
const process = await sandbox.process.exec({
  name: "start-server",
  command: "npm run dev -- --host 0.0.0.0 --port 8000",
  restartOnFailure: true,
  maxRestarts: 5
});
```

```python Python
process = await sandbox.process.exec({
  "name": "start-server",
  "command": "uvicorn main:app --reload --host 0.0.0.0 --port 8000",
  "restart_on_failure": True,
  "max_restarts": 5
})
```

</CodeGroup>

## Sandbox keep-alive

<Warning>
  This is an alpha feature that may change or be removed in future. It can only be used with specified versions of the sandbox API and the Blaxel TypeScript SDK.
</Warning>

By default, sandboxes automatically switch to standby after a few seconds of inactivity to save resources. However, it is possible to adjust this behaviour and keep the sandbox running when you launch a process, even if there isn't an active connection to it. This is typically used to keep a server running in the sandbox environment even when it is not serving requests.

To use this feature, you must first:

- build or rebuild your custom sandbox image with a specific version of the sandbox API that supports the keep-alive feature:

    ```dockerfile
    # Required sandbox-api version with keepAlive support
    COPY --from=ghcr.io/blaxel-ai/sandbox:develop-6a4e7c3 /sandbox-api /usr/local/bin/sandbox-api
    ```

- use a specific development version of the Blaxel TypeScript SDK:

    <CodeGroup>

    ```shell TypeScript (npm)
    npm install @blaxel/core@0.2.63-dev.68
    ```

    ```shell TypeScript (yarn)
    yarn add @blaxel/core@0.2.63-dev.68
    ```

    ```shell TypeScript (bun)
    bun add @blaxel/core@0.2.63-dev.68
    ```

    </CodeGroup>

With these changes, you can include additional keep-alive metadata when launching a new sandbox:

```typescript TypeScript
import { SandboxInstance } from "@blaxel/core";

const sandbox = await SandboxInstance.get("my-sandbox");

// Start a dev server that keeps the sandbox awake
await sandbox.process.exec({
  name: "dev-server",
  command: "npm run dev -- --hostname 0.0.0.0 --port 3000",
  keepAlive: true,        // Prevents auto-standby
  timeout: 3600           // Auto-kill after 1 hour
});
```

If a `timeout` value is not specified, it defaults to 600 seconds. For processes that should run indefinitely until they complete naturally, set the `timeout` to `0`.

You can run multiple processes, and the sandbox will stay active until all of them complete:

```typescript TypeScript
import { SandboxInstance } from "@blaxel/core";

const sandbox = await SandboxInstance.get("my-sandbox");

await sandbox.process.exec({
  name: "api-server",
  command: "npm run start:api",
  keepAlive: true,
  timeout: 3600
});

await sandbox.process.exec({
  name: "worker",
  command: "npm run start:worker",
  keepAlive: true,
  timeout: 3600
});
```

## Process statuses

A process can have either of the following status:

- `running`
- `completed`
- `failed`
- `killed`
- `stopped`
